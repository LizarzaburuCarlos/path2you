---
import { Fragment } from 'react';
import { LecturesUI } from '../../../../components/LecturesUI';
import type Lecture from '../../../../interfaces/lecture';
import BaseLayout from '../../../../layouts/BaseLayout.astro';
import fetchApi from '../../../../lib/strapi';

export async function getStaticPaths() {
  const lectures = await fetchApi<Lecture[]>({
    endpoint: "lectures",
    wrappedByKey: "data",
  });

  return lectures.map((lecture) => ({
    params: { slug: lecture.attributes.slug },
    props: lecture,
  }));
}

const { params } = Astro;

// Acceso a los dos par√°metros llamados slug
const firstSlug = params.slug; // Accede al primer slug

type Props = Lecture;

const lecture = Astro.props;
---

<BaseLayout title={`Lectura: ${lecture.attributes.title}`}>
    <LecturesUI client:load url={Astro.url} pene={firstSlug} lecture={lecture} />
</BaseLayout>